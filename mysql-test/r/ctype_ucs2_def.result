call mtr.add_suppression("Cannot use ucs2 as character_set_client");
show variables like 'collation_server';
Variable_name	Value
collation_server	ucs2_unicode_ci
show variables like "%character_set_ser%";
Variable_name	Value
character_set_server	ucs2
DROP TABLE IF EXISTS t1;
create table t1 (a int);
drop table t1;
End of 4.1 tests
create table t1 (a char(1) character set latin1);
insert into t1 values ('a'),('b'),('c');
select hex(group_concat(a)) from t1;
hex(group_concat(a))
612C622C63
drop table t1;
CREATE TABLE t1(col1 VARCHAR(32) CHARACTER SET ucs2 COLLATE ucs2_bin NOT NULL, 
col2 VARCHAR(32) CHARACTER SET ucs2 COLLATE ucs2_bin NOT NULL, 
UNIQUE KEY key1 USING HASH (col1, col2)) ENGINE=MEMORY;
INSERT INTO t1 VALUES('A', 'A'), ('B', 'B'), ('C', 'C');
INSERT INTO t1 VALUES('A ', 'A ');
ERROR 23000: Duplicate entry 'A -A ' for key 'key1'
DROP TABLE t1;
CREATE TABLE t1 (
c1 CHAR(255) CHARACTER SET UCS2 COLLATE UCS2_BIN NOT NULL,
KEY(c1)
) ENGINE=MyISAM;
INSERT INTO t1 VALUES ('marshall\'s');
INSERT INTO t1 VALUES ('marsh');
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
DROP TABLE t1;
End of 5.0 tests
#
# Start of 10.2 tests
#
#
# MDEV-9711 NO PAD Collatons
#
SET character_set_connection=ucs2;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0041000000000000000000000000000000000000
0041002000200000000000000000000000000000
0020004100000000000000000000000000000000
0020004100200000000000000000000000000000
0041002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci');
LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_ci';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_general_nopad_ci';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0041000000000000000000000000000000000000
0041002000200000000000000000000000000000
0020004100000000000000000000000000000000
0020004100200000000000000000000000000000
0041002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci');
LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_ci';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_general_nopad_ci';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_general_nopad_ci';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0041000000000000000000000000000000000000
0041002000200000000000000000000000000000
0020004100000000000000000000000000000000
0020004100200000000000000000000000000000
0041002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_general_nopad_ci' WHEN 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_general_nopad_ci' = 'abc ' COLLATE 'ucs2_general_nopad_ci' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci');
LEAST('abc ' COLLATE 'ucs2_general_nopad_ci', 'abc  ' COLLATE 'ucs2_general_nopad_ci')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_general_ci';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_general_nopad_ci';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_ci';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_general_nopad_ci';
COUNT(*)
1
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_nopad_bin';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0061000000000000000000000000000000000000
0061002000200000000000000000000000000000
0020006100000000000000000000000000000000
0020006100200000000000000000000000000000
0061002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin');
LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_bin';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_nopad_bin';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_nopad_bin';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0061000000000000000000000000000000000000
0061002000200000000000000000000000000000
0020006100000000000000000000000000000000
0020006100200000000000000000000000000000
0061002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin');
LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_bin';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_nopad_bin';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(10) PRIMARY KEY) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('abc'),('abc  '),(' a'),(' a '),('a   ');
SELECT * FROM t1 ORDER BY a;
a
 a
 a 
a   
abc
abc  
CREATE TABLE t2 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t2 VALUES ('abc '),('abc  '),(' a'),('a ');
SELECT * FROM t1 UNION SELECT * FROM t2 ORDER BY a;
a
 a
 a 
a 
a   
abc
abc 
abc  
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_nopad_bin';
INSERT INTO t1 VALUES ('a'),('a  '),(' a'),(' a '),('a   ');
SELECT DISTINCT * FROM t1 ORDER BY a;
a
 a
 a 
a
a  
a   
SELECT DISTINCT COUNT(*) FROM t1 ORDER BY a;
COUNT(*)
5
SELECT MAX(a) FROM t1;
MAX(a)
a   
CREATE TABLE t2 (a VARCHAR(10), b int, c varchar(10)) COLLATE 'ucs2_nopad_bin';
INSERT t2 values('ab', 12, 'cd'), ('ab', 2, 'ed'), ('aa', 20, 'er'), ('aa  ', 0, 'er ');
SELECT * FROM t2 GROUP BY b ORDER BY c;
a	b	c
ab	12	cd
ab	2	ed
aa	20	er
aa  	0	er 
DROP TABLE t2;
SELECT HEX(WEIGHT_STRING(a AS CHAR(10))) FROM t1;
HEX(WEIGHT_STRING(a AS CHAR(10)))
0061000000000000000000000000000000000000
0061002000200000000000000000000000000000
0020006100000000000000000000000000000000
0020006100200000000000000000000000000000
0061002000200020000000000000000000000000
DROP TABLE t1;
SELECT IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad');
IF('abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin', 'pad', 'nopad')
nopad
SELECT CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE 'abc' COLLATE 'ucs2_nopad_bin' WHEN 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END;
CASE WHEN 'abc' COLLATE 'ucs2_nopad_bin' = 'abc ' COLLATE 'ucs2_nopad_bin' THEN 'pad' ELSE 'nopad' END
nopad
SELECT LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin');
LEAST('abc ' COLLATE 'ucs2_nopad_bin', 'abc  ' COLLATE 'ucs2_nopad_bin')
abc 
CREATE TABLE t1 (a VARCHAR(10)) COLLATE 'ucs2_bin';
INSERT INTO t1 VALUES ('a'),('a ');
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
ALTER TABLE t1 MODIFY a VARCHAR(10) COLLATE 'ucs2_nopad_bin';
SELECT COUNT(*) FROM t1 WHERE a='a';
COUNT(*)
1
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_bin';
COUNT(*)
2
SELECT COUNT(*) FROM t1 WHERE a='a' COLLATE 'ucs2_nopad_bin';
COUNT(*)
1
DROP TABLE t1;
#
# End of 10.2 tests
#
